{"version":3,"sources":["../../src/commands/preview.parser.ts","../../src/commands/preview.ts"],"sourcesContent":["import { Command, Option } from 'commander';\n\nexport function setupPreviewParserProgram(): Command {\n  const program = new Command();\n  program\n    .name('vivliostyle preview')\n    .description('launch preview server')\n    .arguments('[input]')\n    .option('-c, --config <config_file>', 'path to vivliostyle.config.js')\n    .option('-T, --theme <theme...>', 'theme path or package name')\n    .option(\n      '-s, --size <size>',\n      `output pdf size\npreset: A5, A4, A3, B5, B4, JIS-B5, JIS-B4, letter, legal, ledger\ncustom(comma separated): 182mm,257mm or 8.5in,11in`,\n    )\n    .option('-m, --crop-marks', 'print crop marks')\n    .option(\n      '--bleed <bleed>',\n      'extent of the bleed area for printing with crop marks [3mm]',\n    )\n    .option(\n      '--crop-offset <offset>',\n      'distance between the edge of the trim size and the edge of the media size. [auto (13mm + bleed)]',\n    )\n    .option(\n      '--css <CSS>',\n      'custom style CSS code. (ex: \":root {--my-color: lime;}\")',\n    )\n    .option('--style <stylesheet>', 'additional stylesheet URL or path')\n    .option('--user-style <user_stylesheet>', 'user stylesheet URL or path')\n    .option('-d, --single-doc', 'single HTML document input')\n    .option('-q, --quick', 'quick loading with rough page count')\n    .option('--title <title>', 'title')\n    .option('--author <author>', 'author')\n    .option('-l, --language <language>', 'language')\n    .addOption(\n      new Option(\n        '--reading-progression <direction>',\n        'Direction of reading progression',\n      ).choices(['ltr', 'rtl']),\n    )\n    .addOption(new Option('--sandbox', `launch chrome with sandbox`).hideHelp())\n    .addOption(\n      new Option('--no-sandbox', `launch chrome without sandbox`).hideHelp(),\n    )\n    .option(\n      '--executable-browser <path>',\n      'specify a path of executable browser you installed',\n    )\n    .option(\n      '--viewer <URL>',\n      `specify a URL of displaying viewer instead of vivliostyle-cli's one\nIt is useful that using own viewer that has staging features. (ex: https://vivliostyle.vercel.app/)`,\n    )\n    .option(\n      '--viewer-param <parameters>',\n      `specify viewer parameters. (ex: \"allowScripts=false&pixelRatio=16\")`,\n    )\n    .addOption(\n      new Option(\n        '--browser <browser>',\n        `EXPERIMENTAL SUPPORT: Specify a browser type to launch Vivliostyle viewer [chromium]\nCurrently, Firefox and Webkit support preview command only!`,\n      ).choices(['chromium', 'firefox', 'webkit']),\n    )\n    .addOption(\n      new Option(\n        '--proxy-server <proxyServer>',\n        `HTTP/SOCK proxy server url for underlying Playwright`,\n      ),\n    )\n    .addOption(\n      new Option(\n        '--proxy-bypass <proxyBypass>',\n        `optional comma-separated domains to bypass proxy`,\n      ),\n    )\n    .addOption(\n      new Option(\n        '--proxy-user <proxyUser>',\n        `optional username for HTTP proxy authentication`,\n      ),\n    )\n    .addOption(\n      new Option(\n        '--proxy-pass <proxyPass>',\n        `optional password for HTTP proxy authentication`,\n      ),\n    )\n    .addOption(\n      new Option(\n        '--log-level <level>',\n        'specify a log level of console outputs',\n      )\n        .choices(['silent', 'info', 'verbose', 'debug'])\n        .default('info'),\n    )\n    .addOption(\n      new Option(\n        '--ignore-https-errors',\n        `true to ignore HTTPS errors when Playwright browser opens a new page`,\n      ),\n    )\n    .option('--host <host>', 'IP address the server should listen on')\n    .option('--port <port>', 'port the server should listen on', parseInt)\n    .option('--no-open-viewer', 'do not open viewer')\n    .option('--no-enable-static-serve', 'disable static file serving')\n    .option('--no-enable-viewer-start-page', 'disable viewer start page')\n    .option('--vite-config-file <path>', 'Vite config file path')\n    .option(\n      '--no-vite-config-file',\n      'ignore Vite config file even if it exists',\n    )\n    // TODO: Remove it in the next major version up\n    .addOption(new Option('--executable-chromium <path>').hideHelp())\n    .addOption(new Option('--verbose').hideHelp())\n    .addOption(new Option('--http').hideHelp());\n  return program;\n}\n","import { preview } from '../core/preview.js';\nimport { gracefulError } from '../util.js';\nimport { parseFlagsToInlineConfig } from './cli-flags.js';\nimport { setupPreviewParserProgram } from './preview.parser.js';\n\ntry {\n  const inlineConfig = parseFlagsToInlineConfig(\n    process.argv,\n    setupPreviewParserProgram,\n  );\n  await preview(inlineConfig);\n} catch (err) {\n  if (err instanceof Error) {\n    gracefulError(err);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAAA,SAAS,SAAS,cAAc;AAEzB,SAAS,4BAAqC;AACnD,QAAM,UAAU,IAAI,QAAQ;AAC5B,UACG,KAAK,qBAAqB,EAC1B,YAAY,uBAAuB,EACnC,UAAU,SAAS,EACnB,OAAO,8BAA8B,+BAA+B,EACpE,OAAO,0BAA0B,4BAA4B,EAC7D;AAAA,IACC;AAAA,IACA;AAAA;AAAA;AAAA,EAGF,EACC,OAAO,oBAAoB,kBAAkB,EAC7C;AAAA,IACC;AAAA,IACA;AAAA,EACF,EACC;AAAA,IACC;AAAA,IACA;AAAA,EACF,EACC;AAAA,IACC;AAAA,IACA;AAAA,EACF,EACC,OAAO,wBAAwB,mCAAmC,EAClE,OAAO,kCAAkC,6BAA6B,EACtE,OAAO,oBAAoB,4BAA4B,EACvD,OAAO,eAAe,qCAAqC,EAC3D,OAAO,mBAAmB,OAAO,EACjC,OAAO,qBAAqB,QAAQ,EACpC,OAAO,6BAA6B,UAAU,EAC9C;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA;AAAA,IACF,EAAE,QAAQ,CAAC,OAAO,KAAK,CAAC;AAAA,EAC1B,EACC,UAAU,IAAI,OAAO,aAAa,4BAA4B,EAAE,SAAS,CAAC,EAC1E;AAAA,IACC,IAAI,OAAO,gBAAgB,+BAA+B,EAAE,SAAS;AAAA,EACvE,EACC;AAAA,IACC;AAAA,IACA;AAAA,EACF,EACC;AAAA,IACC;AAAA,IACA;AAAA;AAAA,EAEF,EACC;AAAA,IACC;AAAA,IACA;AAAA,EACF,EACC;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA;AAAA;AAAA,IAEF,EAAE,QAAQ,CAAC,YAAY,WAAW,QAAQ,CAAC;AAAA,EAC7C,EACC;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA;AAAA,IACF;AAAA,EACF,EACC;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA;AAAA,IACF;AAAA,EACF,EACC;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA;AAAA,IACF;AAAA,EACF,EACC;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA;AAAA,IACF;AAAA,EACF,EACC;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA;AAAA,IACF,EACG,QAAQ,CAAC,UAAU,QAAQ,WAAW,OAAO,CAAC,EAC9C,QAAQ,MAAM;AAAA,EACnB,EACC;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA;AAAA,IACF;AAAA,EACF,EACC,OAAO,iBAAiB,wCAAwC,EAChE,OAAO,iBAAiB,oCAAoC,QAAQ,EACpE,OAAO,oBAAoB,oBAAoB,EAC/C,OAAO,4BAA4B,6BAA6B,EAChE,OAAO,iCAAiC,2BAA2B,EACnE,OAAO,6BAA6B,uBAAuB,EAC3D;AAAA,IACC;AAAA,IACA;AAAA,EACF,EAEC,UAAU,IAAI,OAAO,8BAA8B,EAAE,SAAS,CAAC,EAC/D,UAAU,IAAI,OAAO,WAAW,EAAE,SAAS,CAAC,EAC5C,UAAU,IAAI,OAAO,QAAQ,EAAE,SAAS,CAAC;AAC5C,SAAO;AACT;;;AClHA,IAAI;AACF,QAAM,eAAe;AAAA,IACnB,QAAQ;AAAA,IACR;AAAA,EACF;AACA,QAAM,QAAQ,YAAY;AAC5B,SAAS,KAAK;AACZ,MAAI,eAAe,OAAO;AACxB,kBAAc,GAAG;AAAA,EACnB;AACF;","names":[]}